generator prisma_client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

datasource db {
  provider = "postgres"
  url = "***"
}

model User {
  id             String  @default(uuid()) @id
  handle         String
  displayName    String
  twitterId      Int     @default(-1)
  profilePicture String?
  Share          Share[]
}

model Share {
  id        String   @default(uuid()) @id
  authorId  String
  author    User     @relation(fields: [authorId], references: [id])
  episodeId String?
  episode   Episode? @relation(fields: [episodeId], references: [id])
  podcast   Podcast  @relation(fields: [podcastId], references: [id])
  podcastId String
  message   String?
  createdAt DateTime @default(now())
  @@unique([episodeId, podcastId, authorId])
}

model Episode {
  id              String   @default(uuid()) @id
  title           String
  share           Share[]
  podcast         Podcast  @relation(fields: [podcastId], references: [id])
  podcastId       String
  description     String?
  ampId           String?  @unique
  durationSeconds Int?
  url             String?
  ampApiResponse  Json?
  updatedAt       DateTime @updatedAt
  artwork         String?
}

model Podcast {
  id             String    @default(uuid()) @id
  title          String
  Episode        Episode[]
  Share          Share[]
  ampId          String?   @unique
  publisher      String
  description    String?
  feed           String
  url            String?
  ampApiResponse Json?
  updatedAt      DateTime  @updatedAt
  artwork        String?
}
